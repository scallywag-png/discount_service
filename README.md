# Smart PromoCode Microservice 

Бекенд-сервіс для розрахунку знижок в e-commerce. Розроблений на **Django REST Framework**.

##  Ключові можливості

- **Контроль конкурентності (Concurrency):** Реалізовано `select_for_update` та атомарні транзакції для запобігання "стану гонитви" (race conditions) при одночасному використанні промокодів багатьма користувачами.
- **ООП Архітектура:** Логіка розрахунків винесена з View у окремий Service layer. Це дозволяє легко масштабувати систему та додавати нові типи знижок (наприклад, відсоткові або фіксовані).
- **REST API:** Чисті ендпоінти з валідацією вхідних даних та обробкою помилок.

##  Як запустити проєкт

1. **Клонуйте репозиторій:**
   ```bash
   git clone <https://github.com/scallywag-png/discount_service>
   cd discount_service
 2.Встановити залежності:
   pip install -r requirements.txt

 3.Застосувати міграції:
   python manage.py migrate
   
 4.Створити адміністратора (для керування промокодами):
 python manage.py createsuperuser

 5.Запустити сервер:
 python manage.py runserver

 Ендпоінт: POST /api/apply-promo/

 Формат запиту:
 {
  "code": "SUMMER2026",
  "cart_total": 1000
}
Сервер повертає суму знижки та нову ціну.
Якщо код недійсний, прострочений або вичерпано ліміт використань:
{
  "error": "Ліміт використання вичерпано"
}
Можна створювати нові промокоди через стандартну адмінку Django.
